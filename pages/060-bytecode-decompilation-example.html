<section>
  <h1>Python Bytecode Decompilation Example</h1>
  <span class="small">
    <pre>
      <code data-line-numbers="1|1-18|2-7,18|3|1,5|8-17">$ uncompyle6 /tmp/five-moved.pyc
# uncompyle6 version 3.9.1
# Python bytecode version base 3.8.0 (3413)
# Decompiled from: Python 3.12.2 (main, Feb 14 2024, 04:48:40) [GCC 13.2.0]
# Embedded file name: five.py
# Compiled at: 2024-02-17 10:16:08
# Size of source mod 2**32: 153 bytes
"""
BlackHat Asia Example
"""

def five():
    """Returns the string five"""
    return "5"


print(five())
# okay decompiling /tmp/five-moved.pyc
      </code>
    </pre>
  </span>

<aside class="notes">
  <p>
    <div style="color: blue; background-color:
		LightYellow">#/6 time: 15:18</div>
    With this introduction, we can now do our first Python
    decompilation using <em>uncompyle6</em>. The simplest invocation
    is: <em>uncompyle6</em> with a bytecode file name, here
    "/tmp/five-moved.pyc". This is what we created in the last
    slide.
    <div style="color: blue; background-color: LightYellow">
      [DOWN] [DOWN] #/6 ⟶ #/6/0/1
    </div>
  </p>

  <p>
    Lines in orange that start with <code>#</code> are comments. The
    section at the top contains a little bit of the meta-data that I
    mentioned before, which is stored in the bytecode file. It
    is <em>not</em> part of that 25-byte instruction sequence that we
    saw in hex before.
    <div style="color: blue; background-color: LightYellow">[DOWN]
      #/6/0/1 ⟶ #/6/0/2
    </div>
  </p>

  <p>
    Each bytecode has a unique number for the bytecode variant. Here,
    it is 3413, and this variant covers Python version 3.8.
  </p>

  <p>
    Major releases of Python typically can <em>alter</em> the
    programming language and/or the bytecode a little.
  </p>

  <p>
    Python bytecode varies <em>more</em> than any other bytecode that
    I have encountered. So when you find a tool or read a blog about
    Python bytecode, some of the details might only be relevant for a
    small number of versions around the time that the tool was
    developed or when the blog was written.
  </p>

  <p>
    The drift in bytecode from the first release in 1996 to the most
    recent version is about as dramatic as the drift from Latin to
    Italian.
    <div style="color: blue; background-color:
    LightYellow">[DOWN] #/6/0/2 ⟶ #/6/0/3</div></p>

  <p>
    The name of the bytecode <em>file</em> is "five-moved", seen in
    white at the top.  The name of the original Python file is
    "five.py" is seen in orange, a little down from the top.
    <div style="color: blue; background-color: LightYellow">[DOWN]
    #/6/0/3 ⟶ #/6/0/4</div></p>

  <p>But if you ignore the orange comments in both the source Python
  and the reconstructed Python, shown here, you will see that the two
  are very very close.</p>

  <p>And let me show that side by side...
    <div style="color: blue; background-color: LightYellow">[NEXT]
		#/6/0/5 ⟶ #/7</div>
  </p>
  </aside>
</section>
